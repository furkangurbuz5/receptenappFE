<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReceptenApp</title>
    
    <script>
        //GET method 
        function toonKookgerei(){
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                if(this.readyState == 4){
                    //console.log(this.responseText);
                    var alleKookgerei = JSON.parse(this.responseText);
                    var eindString = "<table border=1>";
                    for(var x = 0;x<alleKookgerei.length;x++){
                        eindString += 
                            "<tr><td>" + alleKookgerei[x].naam+
                            "</td><td>"+alleKookgerei[x].type+
                            "</td><td>"+alleKookgerei[x].materiaal+
                            "</td><td>"+alleKookgerei[x].prijs+
                            "</td><td>"+alleKookgerei[x].webshopLink+
                            "</td><td><button onclick=verwijderen("
                            +alleKookgerei[x].kookgereiID+
                            ")>verwijder</button></td></tr>";
                    }
                    eindString += "</table>";
                    document.getElementById("alleKookgereiTabel").innerHTML = eindString;
                }
            }
            xhr.open("GET","http://localhost:8082/allekookgerei",true);
            xhr.send();
        }

        //DELETE method 
        function verwijderen(deid){
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                if(this.readyState == 4){
                }
            }
            xhr.open("DELETE", "http://localhost:8082/verwijderkookgerei/"+deid, true);
            xhr.send();
            console.log("item verwijderd");
        }

        //POST method 
        function toevoegen(){
            var dekookgerei = {}; //maakt hier een lege JSON variable  
            dekookgerei.naam = document.getElementById("naamkookgerei").value;
            dekookgerei.type = document.getElementById("typekookgerei").value;
            dekookgerei.materiaal = document.getElementById("matkookgerei").value;
            dekookgerei.prijs = document.getElementById("prijskookgerei").value;
            dekookgerei.webshopLink = document.getElementById("webshopkookgerei").value;

            var deJSON = JSON.stringify(dekookgerei);
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                if(this.readyState == 4){
                    console.log(deJSON);
                }
            }
            xhr.open("POST","http://localhost:8082/voegkookgereitoe",true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(deJSON);
            console.log("item toegevoegd.");

        }

        function clearFields(){
            document.getElementById("naamkookgerei").value ="";
            document.getElementById("typekookgerei").value ="";
            document.getElementById("matkookgerei").value ="";
            document.getElementById("prijskookgerei").value ="";
            document.getElementById("webshopkookgerei").value ="";
        }

        function clearTable(){
            document.getElementById("alleKookgereiTabel").innerHTML = "";
        }

        // function loading(){
        //     console.log(($('form')[0].checkValidity()));
        //     if($('form')[0].checkValidity()){
        //         toevoegen();
        //     }
        // }

    </script>
</head>
<style>
    label {
        display:inline-block;
        width:110px;
        font-family:Verdana, Geneva, Tahoma, sans-serif;
        margin-bottom:10px;
    }
    li{
        list-style:none;
    }
    header{
        font-family:Verdana, Geneva, Tahoma, sans-serif;
    }
    div{
        margin-top:10px;
        margin-bottom:10px;
    }
    td{
        margin-bottom:10px;
    }
    #loading{
        display:none;
    }
    
    
</style>

<body>
    <header> <h1>ReceptenApp!</h1></header>
        <header><h4>Voeg kookgerei toe:</h2></header>
            <form>
                <label for="naamkookgerei">Naam:</label>
                <input data-val-required="Het naam veld is verplicht." id="naamkookgerei" required="required"/><br>
                <label for="typekookgerei">Type:</label>
                <input id="typekookgerei"/><br>
                <label for="matkookgerei">Materiaal:</label>
                <input id="matkookgerei"/><br>
                <label for="prijskookgerei">Prijs:</label>
                <input id="prijskookgerei"/><br>
                <label for="webshopkookgerei">Webshoplink:</label>
                <input id="webshopkookgerei"/><br><br> 
                <input type="submit" value="Maak kookgerei aan" onclick="toevoegen()" >
            </form><br>
        <!-- <button onclick="toevoegen()" >Kookgerei toevoegen</button> -->
        <button onclick="clearFields()">Reset invoer</button><br><br>
        
        <button onclick="toonKookgerei()">Toon/refresh alle kookgerei</button>
        <div id="alleKookgereiTabel"> </div>
        <button onclick="clearTable()">Reset tabel</button>
        


</body>
</html>